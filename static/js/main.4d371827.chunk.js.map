{"version":3,"sources":["components/PhotoCard/PhotoCard.module.css","components/Modal/Modal.module.css","components/Gallery/Gallery.module.css","components/SearchForm/SearchForm.module.css","components/PhotoCard/PhotoCard.js","components/Gallery/Gallery.js","components/Modal/Modal.js","components/SearchForm/SearchForm.js","services/fetchApi.js","components/App/App.js","index.js"],"names":["module","exports","PhotoCard","item","webformatURL","id","likes","views","comments","downloads","onOpenModal","className","styles","photo_card","src","alt","stats","stats_item","type","fullscreen_button","onClick","Gallery","photos","allPhotos","map","key","gallery","Modal","backdropRef","createRef","clicClose","e","code","props","onCloseModal","handleBackdropClick","current","target","window","addEventListener","this","removeEventListener","url","overlay","ref","role","modal","Component","SearchForm","state","query","handleChange","setState","value","handleSubmit","preventDefault","onSubmit","search_form","autoComplete","placeholder","onChange","fetchArticles","pageNumber","fetch","then","res","json","data","hits","App","isLoading","error","isModalOpen","targetPhoto","onSearch","fetchItems","fetchApi","items","catch","finally","openModal","closeModal","prevProps","prevState","scrollTo","top","document","body","scrollHeight","behavior","currentPhoto","filter","photo","app","message","length","largeImageURL","button","ReactDOM","render","getElementById"],"mappings":"sIACAA,EAAOC,QAAU,CAAC,WAAa,8BAA8B,MAAQ,yBAAyB,WAAa,8BAA8B,kBAAoB,uC,qBCA7JD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,sCCA3DD,EAAOC,QAAU,CAAC,QAAU,2B,gBCA5BD,EAAOC,QAAU,CAAC,YAAc,kC,mNCyDjBC,EArDG,SAAC,GAGZ,IAAD,IAFJC,KAAQC,EAEJ,EAFIA,aAAcC,EAElB,EAFkBA,GAAIC,EAEtB,EAFsBA,MAAOC,EAE7B,EAF6BA,MAAOC,EAEpC,EAFoCA,SAAUC,EAE9C,EAF8CA,UAClDC,EACI,EADJA,YAEA,OACE,4BACE,yBAAKC,UAAWC,IAAOC,YACrB,yBAAKC,IAAKV,EAAcW,IAAI,MAE5B,yBAAKJ,UAAWC,IAAOI,OACrB,uBAAGL,UAAWC,IAAOK,YACnB,uBAAGN,UAAU,kBAAb,YACCL,GAEH,uBAAGK,UAAWC,IAAOK,YACnB,uBAAGN,UAAU,kBAAb,cACCJ,GAEH,uBAAGI,UAAWC,IAAOK,YACnB,uBAAGN,UAAU,kBAAb,WACCH,GAEH,uBAAGG,UAAWC,IAAOK,YACnB,uBAAGN,UAAU,kBAAb,kBACCF,IAKL,4BACES,KAAK,SACLP,UAAWC,IAAOO,kBAClBC,QAAS,kBAAMV,EAAYL,KAE3B,uBAAGM,UAAU,kBAAb,oBCpBKU,EAbC,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,OAAQZ,EAAkB,EAAlBA,YACnBa,EAAYD,EAAOE,KAAI,SAAArB,GAAI,OAC/B,kBAAC,EAAD,CAAWsB,IAAKtB,EAAKE,GAAIF,KAAMA,EAAMO,YAAaA,OAGpD,OAAO,wBAAIC,UAAWC,IAAOc,SAAUH,I,gBC8C1BI,E,2MA3CbC,YAAcC,sB,EAUdC,UAAY,SAAAC,GACK,WAAXA,EAAEC,MAEN,EAAKC,MAAMC,gB,EAGbC,oBAAsB,SAAAJ,GAChB,EAAKH,YAAYQ,SAAWL,EAAEM,SAAW,EAAKT,YAAYQ,SAI9D,EAAKH,MAAMC,gB,mFAlBXI,OAAOC,iBAAiB,UAAWC,KAAKV,a,6CAIxCQ,OAAOG,oBAAoB,UAAWD,KAAKV,a,+BAiBnC,IACAY,EAAQF,KAAKP,MAAbS,IAER,OACE,yBACE/B,UAAWC,IAAO+B,QAClBC,IAAKJ,KAAKZ,YACVR,QAASoB,KAAKL,oBACdU,KAAK,gBAEL,yBAAKlC,UAAWC,IAAOkC,OACrB,yBAAKhC,IAAK4B,EAAK3B,IAAI,W,GAzCTgC,a,iBCLCC,E,2MACnBC,MAAQ,CAAEC,MAAO,I,EAEjBC,aAAe,SAAApB,GACb,EAAKqB,SAAS,CACZF,MAAOnB,EAAEM,OAAOgB,S,EAIpBC,aAAe,SAAAvB,GACbA,EAAEwB,iBACF,EAAKtB,MAAMuB,SAAS,EAAKP,MAAMC,OAC/B,EAAKE,SAAS,CAAEF,MAAO,M,wEAIvB,OACE,0BAAMvC,UAAWC,IAAO6C,YAAaD,SAAUhB,KAAKc,cAClD,2BACEpC,KAAK,OACLwC,aAAa,MACbC,YAAY,mBACZN,MAAOb,KAAKS,MAAMC,MAClBU,SAAUpB,KAAKW,oB,GAvBeJ,aCH3Bc,EAAgB,WAAiC,IAAhCX,EAA+B,uDAAvB,GAAIY,EAAmB,uDAAN,EACrD,OAAOC,MAAM,sEAAD,OAC4Db,EAD5D,iBAC0EY,EAD1E,wDAGTE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAG,GAAI,OAAIA,EAAKC,S,gBCsGRC,E,2MA/FbpB,MAAQ,CACN3B,OAAQ,GACRgD,WAAW,EACXC,MAAO,KACPT,WAAY,EACZU,aAAa,EACbtB,MAAO,GACPuB,YAAa,I,EAmBfC,SAAW,SAAAxB,GACT,EAAKE,SAAS,CACZF,QACA5B,OAAQ,GACRwC,WAAY,K,EAIhBa,WAAa,WACX,EAAKvB,SAAS,CAAEkB,WAAW,IAC3BM,EACiB,EAAK3B,MAAMC,MAAO,EAAKD,MAAMa,YAC3CE,MAAK,SAAAa,GACJ,EAAKzB,UAAS,SAAAH,GAAK,MAAK,CACtB3B,OAAO,GAAD,mBAAM2B,EAAM3B,QAAZ,YAAuBuD,IAC7Bf,WAAYb,EAAMa,WAAa,SAGlCgB,OAAM,SAAAP,GACL,EAAKnB,SAAS,CACZmB,aAGHQ,SAAQ,WACP,EAAK3B,SAAS,CACZkB,WAAW,Q,EAKnBU,UAAY,SAAA3E,GACV,EAAK+C,SAAS,CAAEoB,aAAa,EAAMC,YAAapE,K,EAGlD4E,WAAa,WACX,EAAK7B,SAAS,CAAEoB,aAAa,EAAOC,YAAa,M,kFAnDhCS,EAAWC,GAAY,IAAD,EACb3C,KAAKS,MAAvBC,EAD+B,EAC/BA,MAAO5B,EADwB,EACxBA,OACX6D,EAAUjC,QAAUA,GACtBV,KAAKmC,aAKHQ,EAAU7D,SAAWA,GACvBgB,OAAO8C,SAAS,CACdC,IAAKC,SAASC,KAAKC,aACnBC,SAAU,a,+BA2CN,IAAD,EACwDjD,KAAKS,MAA5D3B,EADD,EACCA,OAAQgD,EADT,EACSA,UAAWC,EADpB,EACoBA,MAAOC,EAD3B,EAC2BA,YAAaC,EADxC,EACwCA,YACzCiB,EAAepE,EAAOqE,QAAO,SAAAC,GAAK,OAAIA,EAAMvF,KAAOoE,KAEzD,OACE,yBAAK9D,UAAWC,IAAOiF,KACpB,kBAAC,EAAD,CAAYrC,SAAUhB,KAAKkC,WAC3BH,GAAS,4DAAkCA,EAAMuB,SACjDxB,GAAa,kBAAC,IAAD,MACbhD,EAAOyE,OAAS,GACf,kBAAC,EAAD,CAASzE,OAAQA,EAAQZ,YAAa8B,KAAKwC,YAE5CR,GACC,kBAAC,EAAD,CACEtC,aAAcM,KAAKyC,WACnBvC,IAAKgD,EAAa,GAAGM,gBAGxB1E,EAAOyE,OAAS,GACf,4BACE7E,KAAK,SACLE,QAASoB,KAAKmC,WACdhE,UAAWC,IAAOqF,QAHpB,kB,GApFQlD,a,MCNlBmD,IAASC,OAAO,kBAAC,EAAD,MAASb,SAASc,eAAe,W","file":"static/js/main.4d371827.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo_card\":\"PhotoCard_photo_card__13w-z\",\"stats\":\"PhotoCard_stats__Ru5xd\",\"stats_item\":\"PhotoCard_stats_item__5NP7T\",\"fullscreen_button\":\"PhotoCard_fullscreen_button__9EO9a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__ezxM3\",\"modal\":\"Modal_modal__104s4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__1AnRr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search_form\":\"SearchForm_search_form__2DQXb\"};","import React from 'react';\nimport T from 'prop-types';\n\nimport styles from './PhotoCard.module.css';\n\nconst PhotoCard = ({\n  item: { webformatURL, id, likes, views, comments, downloads },\n  onOpenModal,\n}) => {\n  return (\n    <li>\n      <div className={styles.photo_card}>\n        <img src={webformatURL} alt=\"#\" />\n\n        <div className={styles.stats}>\n          <p className={styles.stats_item}>\n            <i className=\"material-icons\">thumb_up</i>\n            {likes}\n          </p>\n          <p className={styles.stats_item}>\n            <i className=\"material-icons\">visibility</i>\n            {views}\n          </p>\n          <p className={styles.stats_item}>\n            <i className=\"material-icons\">comment</i>\n            {comments}\n          </p>\n          <p className={styles.stats_item}>\n            <i className=\"material-icons\">cloud_download</i>\n            {downloads}\n          </p>\n        </div>\n\n        {/* <!-- Кнопка для открытия модалки с большим изображением, появляется при наведении --> */}\n        <button\n          type=\"button\"\n          className={styles.fullscreen_button}\n          onClick={() => onOpenModal(id)}\n        >\n          <i className=\"material-icons\">zoom_out_map</i>\n        </button>\n      </div>\n    </li>\n  );\n};\n\nPhotoCard.propTypes = {\n  item: T.shape({\n    id: T.number.isRequired,\n    webformatURL: T.string.isRequired,\n    likes: T.number.isRequired,\n    views: T.number.isRequired,\n    comments: T.number.isRequired,\n    downloads: T.number.isRequired,\n  }).isRequired,\n  onOpenModal: T.func.isRequired,\n};\n\nexport default PhotoCard;\n","import React from 'react';\nimport T from 'prop-types';\nimport styles from './Gallery.module.css';\n\nimport PhotoCard from '../PhotoCard/PhotoCard';\n\nconst Gallery = ({ photos, onOpenModal }) => {\n  const allPhotos = photos.map(item => (\n    <PhotoCard key={item.id} item={item} onOpenModal={onOpenModal} />\n  ));\n\n  return <ul className={styles.gallery}>{allPhotos}</ul>;\n};\n\nGallery.propTypes = {\n  photos: T.arrayOf(T.shape()).isRequired,\n  onOpenModal: T.func.isRequired,\n};\n\nexport default Gallery;\n","import React, { Component, createRef } from 'react';\n// import { createPortal } from 'react-dom';\nimport T from 'prop-types';\n\nimport styles from './Modal.module.css';\n\n// const MODAL_ROOT = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  static propTypes = {\n    onCloseModal: T.func.isRequired,\n    url: T.string.isRequired,\n  };\n\n  backdropRef = createRef();\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.clicClose);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.clicClose);\n  }\n\n  clicClose = e => {\n    if (e.code !== 'Escape') return;\n\n    this.props.onCloseModal();\n  };\n\n  handleBackdropClick = e => {\n    if (this.backdropRef.current && e.target !== this.backdropRef.current) {\n      return;\n    }\n\n    this.props.onCloseModal();\n  };\n\n  render() {\n    const { url } = this.props;\n\n    return (\n      <div\n        className={styles.overlay}\n        ref={this.backdropRef}\n        onClick={this.handleBackdropClick}\n        role=\"presentation\"\n      >\n        <div className={styles.modal}>\n          <img src={url} alt=\"\" />\n        </div>\n      </div>\n      // MODAL_ROOT\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component } from 'react';\nimport styles from './SearchForm.module.css';\n\nexport default class SearchForm extends Component {\n  state = { query: '' };\n\n  handleChange = e => {\n    this.setState({\n      query: e.target.value,\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <form className={styles.search_form} onSubmit={this.handleSubmit}>\n        <input\n          type=\"text\"\n          autoComplete=\"off\"\n          placeholder=\"Search images...\"\n          value={this.state.query}\n          onChange={this.handleChange}\n        />\n      </form>\n    );\n  }\n}\n","export const fetchArticles = (query = '', pageNumber = 1) => {\n  return fetch(\n    `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${query}&page=${pageNumber}&per_page=12&key=14238926-6521d7a6bddf65796939e13e0`,\n  )\n    .then(res => res.json())\n    .then(data => data.hits);\n};\n","import React, { Component } from 'react';\nimport { BulletList } from 'react-content-loader';\n\nimport Gallery from '../Gallery/Gallery';\nimport Modal from '../Modal/Modal';\nimport SearchForm from '../SearchForm/SearchForm';\nimport * as fetchApi from '../../services/fetchApi';\nimport styles from './App-module.css';\n\nconst MyBulletListLoader = () => <BulletList />;\n\nclass App extends Component {\n  state = {\n    photos: [],\n    isLoading: false,\n    error: null,\n    pageNumber: 0,\n    isModalOpen: false,\n    query: '',\n    targetPhoto: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { query, photos } = this.state;\n    if (prevState.query !== query) {\n      this.fetchItems();\n    }\n    // console.log(prevState.pageNumber, 'prevState.pageNumber');\n    // console.log(pageNumber, 'pageNumber');\n\n    if (prevState.photos !== photos) {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  onSearch = query => {\n    this.setState({\n      query,\n      photos: [],\n      pageNumber: 1,\n    });\n  };\n\n  fetchItems = () => {\n    this.setState({ isLoading: true });\n    fetchApi\n      .fetchArticles(this.state.query, this.state.pageNumber)\n      .then(items => {\n        this.setState(state => ({\n          photos: [...state.photos, ...items],\n          pageNumber: state.pageNumber + 1,\n        }));\n      })\n      .catch(error => {\n        this.setState({\n          error,\n        });\n      })\n      .finally(() => {\n        this.setState({\n          isLoading: false,\n        });\n      });\n  };\n\n  openModal = id => {\n    this.setState({ isModalOpen: true, targetPhoto: id });\n  };\n\n  closeModal = () => {\n    this.setState({ isModalOpen: false, targetPhoto: '' });\n  };\n\n  render() {\n    const { photos, isLoading, error, isModalOpen, targetPhoto } = this.state;\n    const currentPhoto = photos.filter(photo => photo.id === targetPhoto);\n\n    return (\n      <div className={styles.app}>\n        {<SearchForm onSubmit={this.onSearch} />}\n        {error && <p>Whoops, something went wrong: {error.message}</p>}\n        {isLoading && <BulletList />}\n        {photos.length > 0 && (\n          <Gallery photos={photos} onOpenModal={this.openModal} />\n        )}\n        {isModalOpen && (\n          <Modal\n            onCloseModal={this.closeModal}\n            url={currentPhoto[0].largeImageURL}\n          />\n        )}\n        {photos.length > 0 && (\n          <button\n            type=\"button\"\n            onClick={this.fetchItems}\n            className={styles.button}\n          >\n            Load more\n          </button>\n        )}\n      </div>\n    );\n  }\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}